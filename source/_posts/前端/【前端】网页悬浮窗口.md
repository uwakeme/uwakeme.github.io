---
title: ã€å‰ç«¯ã€‘ç½‘é¡µæ‚¬æµ®çª—å£
date: 2024-08-29 18:05:17
tags:
  - VUE
  - å‰ç«¯
categories: å‰ç«¯
---

# ç½‘é¡µæ‚¬æµ®çª—å£

## éœ€æ±‚åœºæ™¯

+ é¡¹ç›®ä¸­é›†æˆäº†è®¾å¤‡å–æ•°çš„åŠŸèƒ½ï¼Œè€Œåœ¨å’Œè®¾å¤‡å–æ•°ç°åœºäººå‘˜å¯¹æ¥çš„æ—¶å€™ï¼Œå‘ç°è®¾å¤‡æ— æ³•ç»‘å®šæ ·å“ï¼Œä¹Ÿæ— æ³•å®æ—¶å–æ•°ï¼Œæ‰€ä»¥è®¾å¤‡è·å–åˆ°çš„æ•°æ®å°±ä¼šä¸å®šæ—¶çš„é€šè¿‡æ¥å£ä¿å­˜åˆ°é¡¹ç›®çš„æ•°æ®åº“ä¸­ã€‚è€Œåœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œéœ€è¦èƒ½è·å–åˆ°è®¾å¤‡å–æ•°çš„æ•°å€¼ï¼Œç„¶åå¡«å†™åˆ°å¯¹åº”çš„è¾“å…¥æ¡†ã€‚
+ ä¹‹å‰æˆ‘çš„åšæ³•æ˜¯é€šè¿‡å®æ—¶æ•°æ®æ¥è·å–è®¾å¤‡å–åˆ°çš„æ•°æ®ï¼Œè¿™ç§æ–¹æ³•å¹¶ä¸å¤Ÿä¸¥è°¨ã€‚ä¹‹åé‡åˆ°è¿™ä¸ªä¸å®šæ—¶å–æ•°çš„é—®é¢˜ï¼Œå°±å¯ä»¥è¿åŒä¹‹å‰çš„é—®é¢˜ä¹Ÿè¿›è¡Œä¼˜åŒ–ã€‚
+ åœ¨ä»£ç å±‚é¢çš„éœ€æ±‚åº”è¯¥æ˜¯ï¼š
  + å¯ä»¥å±•ç¤ºè®¾å¤‡å–æ•°æ•°æ®
  + å¯ä»¥é€‰æ‹©æ•°æ®ï¼Œå¹¶å¡«å†™åˆ°è¾“å…¥æ¡†å†…
  + ä¸å½±å“å…¶ä»–åœ°æ–¹çš„æ“ä½œï¼Œå³è®¾å¤‡å–æ•°å’Œå…¶ä»–åŠŸèƒ½åº”è¯¥æ˜¯ç›¸äº’ç‹¬ç«‹ï¼Œäº’ä¸å½±å“çš„
  + ç¬¦åˆæ“ä½œä¹ æƒ¯ï¼Œæ˜“äºæ“ä½œ



## è§£å†³æ„æƒ³

+ é¦–å…ˆï¼Œå¼¹å‡ºå±‚`el-dialog` åº”è¯¥æ˜¯æ— æ³•æ»¡è¶³è¿™ä¸ªéœ€æ±‚çš„ï¼Œå› ä¸ºå¼¹å‡ºå±‚ç»„ä»¶ä¼šåœ¨å¼¹å‡ºå±‚å¼¹å‡ºåï¼Œå…¶ä»–åœ°æ–¹éƒ½ä¼šæ— æ³•æ“ä½œï¼Œåªèƒ½æ“ä½œå¼¹å‡ºå±‚ä¹‹å†…çš„å†…å®¹ã€‚æ‰€ä»¥æˆ‘å°±å¯»æ€è‡ªå·±å†™ä¸€ä¸ªç»„ä»¶ï¼Œæ¥å®ç°æ—¢å±•ç¤ºäº†è®¾å¤‡å–æ•°æ•°æ®ï¼Œåˆå¯ä»¥æ“ä½œå…¶ä»–åœ°æ–¹ã€‚

+ æˆ‘åœ¨åˆ«çš„ç³»ç»Ÿä¸­æ›¾çœ‹åˆ°è¿‡ç±»ä¼¼çš„åŠŸèƒ½ï¼Œæ˜¯é€šè¿‡ä¸€ä¸ªæ‚¬æµ®æŒ‰é’®ã€è®¾å¤‡å–æ•°ã€‘ï¼Œç‚¹å‡»åä¼šå¼¹å‡ºä¸€ä¸ªæ‚¬æµ®çª—å£ï¼Œé‡Œé¢å±•ç¤ºçš„æ˜¯è®¾å¤‡å–æ•°çš„åˆ—è¡¨æ•°æ®ï¼Œå¯ä»¥è·å–åˆ°è¯¥åŠŸèƒ½å¼€å¯åå–åˆ°çš„æ‰€æœ‰æ•°æ®ï¼Œå¯ä»¥è‡ªè¡Œé€‰æ‹©ï¼Œç„¶åé€‰ä¸­çš„æ•°æ®ä¼šè‡ªåŠ¨å¡«å†™åœ¨è¾“å…¥æ¡†å†…ã€‚

+ æ‰€ä»¥æˆ‘æƒ³ç€å¯ä¸å¯ä»¥ç±»ä¼¼è¿™æ ·åšä¸¤ä¸ªç»„ä»¶ï¼Œä¸€ä¸ªæ˜¯æ‚¬æµ®æŒ‰é’®ï¼Œå¦ä¸€ä¸ªæ˜¯æ‚¬æµ®çª—å£ï¼Œè¿™æ ·åº”è¯¥å¯ä»¥æ»¡è¶³ä»¥ä¸Šéœ€æ±‚ã€‚

+ æ„æƒ³ï¼š

  + åšæˆä¸¤ä¸ªå¯å¤ç”¨çš„å…¬å…±ç»„ä»¶ï¼Œä¸€æ¥éœ€è¦åœ¨ä¸åŒé¡µé¢å¤ç”¨ï¼ŒäºŒæ¥ä»¥åæœ‰ç±»ä¼¼éœ€æ±‚å¯ä»¥æ¥ç€æ”¹è¿›å¤ç”¨
  + åšæˆæ‚¬æµ®çª—ï¼Œä¸é¡µé¢ç›¸äº’ç‹¬ç«‹ï¼Œä¸ä¼šäº’ç›¸å½±å“
  + éœ€è¦å¯ä»¥æ‹–æ‹½ç§»åŠ¨ä½ç½®ï¼Œå¯ä»¥æ‰‹åŠ¨è°ƒèŠ‚æ‚¬æµ®çª—å£çš„å¤§å°ï¼Œé˜²æ­¢é®æŒ¡é¡µé¢å†…å®¹

+ æœ€ç»ˆæˆæœå›¾

  ![image-20240830103044026](/img/post/image-20240830103044026.png)



# ä¸‰ã€æŠ€æœ¯å®ç°

## ï¼ˆä¸€ï¼‰æ‚¬æµ®çª—å£ç»„ä»¶

æ‚¬æµ®çª—å£ç»„ä»¶æ˜¯æ•´ä¸ªåŠŸèƒ½çš„æ ¸å¿ƒï¼Œéœ€è¦å®ç°æ‹–æ‹½ã€è°ƒèŠ‚å¤§å°ã€æ‚¬æµ®æ˜¾ç¤ºç­‰åŠŸèƒ½ã€‚

### 1. ç»„ä»¶ç»“æ„

```vue
<template>
  <div
    v-if="visible"
    ref="floatWindow"
    class="float-window"
    :style="windowStyle"
    @mousedown="handleMouseDown"
  >
    <!-- çª—å£å¤´éƒ¨ -->
    <div class="window-header" @mousedown="startDrag">
      <div class="window-title">{{ title }}</div>
      <div class="window-controls">
        <button class="control-btn" @click="minimize">-</button>
        <button class="control-btn" @click="close">Ã—</button>
      </div>
    </div>
    
    <!-- çª—å£å†…å®¹ -->
    <div class="window-content">
      <slot></slot>
    </div>
    
    <!-- è°ƒèŠ‚å¤§å°çš„æ§åˆ¶ç‚¹ -->
    <div class="resize-handles">
      <div class="resize-handle resize-n" @mousedown="startResize('n')"></div>
      <div class="resize-handle resize-s" @mousedown="startResize('s')"></div>
      <div class="resize-handle resize-w" @mousedown="startResize('w')"></div>
      <div class="resize-handle resize-e" @mousedown="startResize('e')"></div>
      <div class="resize-handle resize-nw" @mousedown="startResize('nw')"></div>
      <div class="resize-handle resize-ne" @mousedown="startResize('ne')"></div>
      <div class="resize-handle resize-sw" @mousedown="startResize('sw')"></div>
      <div class="resize-handle resize-se" @mousedown="startResize('se')"></div>
    </div>
  </div>
</template>

<script>
export default {
  name: 'FloatWindow',
  props: {
    title: {
      type: String,
      default: 'æ‚¬æµ®çª—å£'
    },
    initialWidth: {
      type: Number,
      default: 400
    },
    initialHeight: {
      type: Number,
      default: 300
    },
    initialX: {
      type: Number,
      default: 100
    },
    initialY: {
      type: Number,
      default: 100
    },
    minWidth: {
      type: Number,
      default: 200
    },
    minHeight: {
      type: Number,
      default: 150
    },
    visible: {
      type: Boolean,
      default: true
    }
  },
  data() {
    return {
      // çª—å£ä½ç½®å’Œå¤§å°
      x: this.initialX,
      y: this.initialY,
      width: this.initialWidth,
      height: this.initialHeight,
      
      // æ‹–æ‹½çŠ¶æ€
      isDragging: false,
      dragStartX: 0,
      dragStartY: 0,
      windowStartX: 0,
      windowStartY: 0,
      
      // è°ƒèŠ‚å¤§å°çŠ¶æ€
      isResizing: false,
      resizeDirection: '',
      resizeStartX: 0,
      resizeStartY: 0,
      resizeStartWidth: 0,
      resizeStartHeight: 0,
      resizeStartLeft: 0,
      resizeStartTop: 0
    }
  },
  computed: {
    windowStyle() {
      return {
        left: this.x + 'px',
        top: this.y + 'px',
        width: this.width + 'px',
        height: this.height + 'px'
      }
    }
  },
  mounted() {
    // æ·»åŠ å…¨å±€äº‹ä»¶ç›‘å¬
    document.addEventListener('mousemove', this.handleMouseMove)
    document.addEventListener('mouseup', this.handleMouseUp)
  },
  beforeDestroy() {
    // ç§»é™¤å…¨å±€äº‹ä»¶ç›‘å¬
    document.removeEventListener('mousemove', this.handleMouseMove)
    document.removeEventListener('mouseup', this.handleMouseUp)
  },
  methods: {
    // å¼€å§‹æ‹–æ‹½
    startDrag(e) {
      e.preventDefault()
      this.isDragging = true
      this.dragStartX = e.clientX
      this.dragStartY = e.clientY
      this.windowStartX = this.x
      this.windowStartY = this.y
    },
    
    // å¼€å§‹è°ƒèŠ‚å¤§å°
    startResize(direction) {
      this.isResizing = true
      this.resizeDirection = direction
      this.resizeStartX = event.clientX
      this.resizeStartY = event.clientY
      this.resizeStartWidth = this.width
      this.resizeStartHeight = this.height
      this.resizeStartLeft = this.x
      this.resizeStartTop = this.y
    },
    
    // é¼ æ ‡ç§»åŠ¨å¤„ç†
    handleMouseMove(e) {
      if (this.isDragging) {
        this.handleDrag(e)
      } else if (this.isResizing) {
        this.handleResize(e)
      }
    },
    
    // å¤„ç†æ‹–æ‹½
    handleDrag(e) {
      const deltaX = e.clientX - this.dragStartX
      const deltaY = e.clientY - this.dragStartY
      
      let newX = this.windowStartX + deltaX
      let newY = this.windowStartY + deltaY
      
      // è¾¹ç•Œæ£€æµ‹
      const maxX = window.innerWidth - this.width
      const maxY = window.innerHeight - this.height
      
      newX = Math.max(0, Math.min(newX, maxX))
      newY = Math.max(0, Math.min(newY, maxY))
      
      this.x = newX
      this.y = newY
    },
    
    // å¤„ç†è°ƒèŠ‚å¤§å°
    handleResize(e) {
      const deltaX = e.clientX - this.resizeStartX
      const deltaY = e.clientY - this.resizeStartY
      
      let newWidth = this.resizeStartWidth
      let newHeight = this.resizeStartHeight
      let newX = this.resizeStartLeft
      let newY = this.resizeStartTop
      
      // æ ¹æ®è°ƒèŠ‚æ–¹å‘è®¡ç®—æ–°çš„å°ºå¯¸å’Œä½ç½®
      switch (this.resizeDirection) {
        case 'n':
          newHeight = this.resizeStartHeight - deltaY
          newY = this.resizeStartTop + deltaY
          break
        case 's':
          newHeight = this.resizeStartHeight + deltaY
          break
        case 'w':
          newWidth = this.resizeStartWidth - deltaX
          newX = this.resizeStartLeft + deltaX
          break
        case 'e':
          newWidth = this.resizeStartWidth + deltaX
          break
        case 'nw':
          newWidth = this.resizeStartWidth - deltaX
          newHeight = this.resizeStartHeight - deltaY
          newX = this.resizeStartLeft + deltaX
          newY = this.resizeStartTop + deltaY
          break
        case 'ne':
          newWidth = this.resizeStartWidth + deltaX
          newHeight = this.resizeStartHeight - deltaY
          newY = this.resizeStartTop + deltaY
          break
        case 'sw':
          newWidth = this.resizeStartWidth - deltaX
          newHeight = this.resizeStartHeight + deltaY
          newX = this.resizeStartLeft + deltaX
          break
        case 'se':
          newWidth = this.resizeStartWidth + deltaX
          newHeight = this.resizeStartHeight + deltaY
          break
      }
      
      // åº”ç”¨æœ€å°å°ºå¯¸é™åˆ¶
      newWidth = Math.max(this.minWidth, newWidth)
      newHeight = Math.max(this.minHeight, newHeight)
      
      // è¾¹ç•Œæ£€æµ‹
      if (newX < 0) {
        newWidth += newX
        newX = 0
      }
      if (newY < 0) {
        newHeight += newY
        newY = 0
      }
      if (newX + newWidth > window.innerWidth) {
        newWidth = window.innerWidth - newX
      }
      if (newY + newHeight > window.innerHeight) {
        newHeight = window.innerHeight - newY
      }
      
      this.width = newWidth
      this.height = newHeight
      this.x = newX
      this.y = newY
    },
    
    // é¼ æ ‡é‡Šæ”¾å¤„ç†
    handleMouseUp() {
      this.isDragging = false
      this.isResizing = false
      this.resizeDirection = ''
    },
    
    // æœ€å°åŒ–çª—å£
    minimize() {
      this.$emit('minimize')
    },
    
    // å…³é—­çª—å£
    close() {
      this.$emit('close')
    }
  }
}
</script>

<style scoped>
.float-window {
  position: fixed;
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 6px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  z-index: 9999;
  user-select: none;
}

.window-header {
  height: 32px;
  background: #f5f5f5;
  border-bottom: 1px solid #ddd;
  border-radius: 6px 6px 0 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 12px;
  cursor: move;
}

.window-title {
  font-size: 14px;
  font-weight: 500;
  color: #333;
}

.window-controls {
  display: flex;
  gap: 4px;
}

.control-btn {
  width: 20px;
  height: 20px;
  border: none;
  border-radius: 3px;
  background: #e0e0e0;
  cursor: pointer;
  font-size: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.control-btn:hover {
  background: #d0d0d0;
}

.window-content {
  padding: 12px;
  overflow: auto;
  height: calc(100% - 32px);
}

/* è°ƒèŠ‚å¤§å°çš„æ§åˆ¶ç‚¹ */
.resize-handles {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
}

.resize-handle {
  position: absolute;
  pointer-events: auto;
}

.resize-n {
  top: -3px;
  left: 3px;
  right: 3px;
  height: 6px;
  cursor: n-resize;
}

.resize-s {
  bottom: -3px;
  left: 3px;
  right: 3px;
  height: 6px;
  cursor: s-resize;
}

.resize-w {
  left: -3px;
  top: 3px;
  bottom: 3px;
  width: 6px;
  cursor: w-resize;
}

.resize-e {
  right: -3px;
  top: 3px;
  bottom: 3px;
  width: 6px;
  cursor: e-resize;
}

.resize-nw {
  top: -3px;
  left: -3px;
  width: 6px;
  height: 6px;
  cursor: nw-resize;
}

.resize-ne {
  top: -3px;
  right: -3px;
  width: 6px;
  height: 6px;
  cursor: ne-resize;
}

.resize-sw {
  bottom: -3px;
  left: -3px;
  width: 6px;
  height: 6px;
  cursor: sw-resize;
}

.resize-se {
  bottom: -3px;
  right: -3px;
  width: 6px;
  height: 6px;
  cursor: se-resize;
}
</style>
```

### 2. æ ¸å¿ƒåŠŸèƒ½å®ç°

#### ç»„ä»¶æ‹–æ‹½åŠŸèƒ½

æ‹–æ‹½åŠŸèƒ½é€šè¿‡ç›‘å¬é¼ æ ‡äº‹ä»¶å®ç°ï¼š<mcreference link="https://www.cnblogs.com/deng-jie/p/16408876.html" index="2">2</mcreference>

1. **å¼€å§‹æ‹–æ‹½**ï¼šåœ¨çª—å£å¤´éƒ¨æŒ‰ä¸‹é¼ æ ‡æ—¶è®°å½•åˆå§‹ä½ç½®
2. **æ‹–æ‹½è¿‡ç¨‹**ï¼šç›‘å¬é¼ æ ‡ç§»åŠ¨äº‹ä»¶ï¼Œè®¡ç®—åç§»é‡å¹¶æ›´æ–°çª—å£ä½ç½®
3. **ç»“æŸæ‹–æ‹½**ï¼šé¼ æ ‡é‡Šæ”¾æ—¶åœæ­¢æ‹–æ‹½
4. **è¾¹ç•Œæ£€æµ‹**ï¼šç¡®ä¿çª—å£ä¸ä¼šæ‹–æ‹½åˆ°å±å¹•å¤–

```javascript
// å¼€å§‹æ‹–æ‹½
startDrag(e) {
  e.preventDefault()
  this.isDragging = true
  this.dragStartX = e.clientX
  this.dragStartY = e.clientY
  this.windowStartX = this.x
  this.windowStartY = this.y
}

// å¤„ç†æ‹–æ‹½
handleDrag(e) {
  const deltaX = e.clientX - this.dragStartX
  const deltaY = e.clientY - this.dragStartY
  
  let newX = this.windowStartX + deltaX
  let newY = this.windowStartY + deltaY
  
  // è¾¹ç•Œæ£€æµ‹
  const maxX = window.innerWidth - this.width
  const maxY = window.innerHeight - this.height
  
  newX = Math.max(0, Math.min(newX, maxX))
  newY = Math.max(0, Math.min(newY, maxY))
  
  this.x = newX
  this.y = newY
}
```

#### è°ƒèŠ‚çª—å£å¤§å°åŠŸèƒ½

çª—å£å¤§å°è°ƒèŠ‚é€šè¿‡åœ¨çª—å£è¾¹ç¼˜æ·»åŠ æ§åˆ¶ç‚¹å®ç°ï¼š<mcreference link="https://blog.csdn.net/gitblog_01140/article/details/141344870" index="1">1</mcreference>

1. **æ§åˆ¶ç‚¹å¸ƒå±€**ï¼šåœ¨çª—å£å››è¾¹å’Œå››è§’æ·»åŠ ä¸å¯è§çš„æ§åˆ¶ç‚¹
2. **æ–¹å‘è¯†åˆ«**ï¼šæ ¹æ®ç‚¹å‡»çš„æ§åˆ¶ç‚¹ç¡®å®šè°ƒèŠ‚æ–¹å‘
3. **å°ºå¯¸è®¡ç®—**ï¼šæ ¹æ®é¼ æ ‡ç§»åŠ¨è·ç¦»è®¡ç®—æ–°çš„çª—å£å°ºå¯¸
4. **æœ€å°å°ºå¯¸é™åˆ¶**ï¼šç¡®ä¿çª—å£ä¸ä¼šå°äºæœ€å°å°ºå¯¸

```javascript
// å¼€å§‹è°ƒèŠ‚å¤§å°
startResize(direction) {
  this.isResizing = true
  this.resizeDirection = direction
  this.resizeStartX = event.clientX
  this.resizeStartY = event.clientY
  this.resizeStartWidth = this.width
  this.resizeStartHeight = this.height
  this.resizeStartLeft = this.x
  this.resizeStartTop = this.y
}

// å¤„ç†è°ƒèŠ‚å¤§å°
handleResize(e) {
  const deltaX = e.clientX - this.resizeStartX
  const deltaY = e.clientY - this.resizeStartY
  
  // æ ¹æ®è°ƒèŠ‚æ–¹å‘è®¡ç®—æ–°çš„å°ºå¯¸å’Œä½ç½®
  switch (this.resizeDirection) {
    case 'se': // å³ä¸‹è§’
      newWidth = this.resizeStartWidth + deltaX
      newHeight = this.resizeStartHeight + deltaY
      break
    // ... å…¶ä»–æ–¹å‘çš„å¤„ç†
  }
  
  // åº”ç”¨æœ€å°å°ºå¯¸é™åˆ¶
  newWidth = Math.max(this.minWidth, newWidth)
  newHeight = Math.max(this.minHeight, newHeight)
}
```

#### æ‚¬æµ®åœ¨å…¶ä»–ç»„ä»¶ä¹‹ä¸Š

é€šè¿‡CSSçš„`z-index`å±æ€§å®ç°æ‚¬æµ®æ•ˆæœï¼š

```css
.float-window {
  position: fixed;  /* å›ºå®šå®šä½ï¼Œè„±ç¦»æ–‡æ¡£æµ */
  z-index: 9999;    /* é«˜å±‚çº§ï¼Œç¡®ä¿åœ¨æœ€ä¸Šå±‚ */
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 6px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  user-select: none; /* ç¦æ­¢æ–‡æœ¬é€‰æ‹© */
}
```

## ï¼ˆäºŒï¼‰æ‚¬æµ®æŒ‰é’®ç»„ä»¶

æ‚¬æµ®æŒ‰é’®ç”¨äºè§¦å‘æ‚¬æµ®çª—å£çš„æ˜¾ç¤ºå’Œéšè—ã€‚

```vue
<template>
  <div
    ref="floatButton"
    class="float-button"
    :style="buttonStyle"
    @click="toggleWindow"
    @mousedown="startDrag"
  >
    <i class="icon">{{ icon }}</i>
    <span v-if="showText" class="button-text">{{ text }}</span>
  </div>
</template>

<script>
export default {
  name: 'FloatButton',
  props: {
    icon: {
      type: String,
      default: 'ğŸ“Š'
    },
    text: {
      type: String,
      default: 'è®¾å¤‡å–æ•°'
    },
    showText: {
      type: Boolean,
      default: true
    },
    initialX: {
      type: Number,
      default: 50
    },
    initialY: {
      type: Number,
      default: 200
    }
  },
  data() {
    return {
      x: this.initialX,
      y: this.initialY,
      isDragging: false,
      dragStartX: 0,
      dragStartY: 0,
      buttonStartX: 0,
      buttonStartY: 0,
      clickStartTime: 0
    }
  },
  computed: {
    buttonStyle() {
      return {
        left: this.x + 'px',
        top: this.y + 'px'
      }
    }
  },
  mounted() {
    document.addEventListener('mousemove', this.handleMouseMove)
    document.addEventListener('mouseup', this.handleMouseUp)
  },
  beforeDestroy() {
    document.removeEventListener('mousemove', this.handleMouseMove)
    document.removeEventListener('mouseup', this.handleMouseUp)
  },
  methods: {
    // å¼€å§‹æ‹–æ‹½
    startDrag(e) {
      this.clickStartTime = Date.now()
      this.isDragging = false
      this.dragStartX = e.clientX
      this.dragStartY = e.clientY
      this.buttonStartX = this.x
      this.buttonStartY = this.y
    },
    
    // é¼ æ ‡ç§»åŠ¨å¤„ç†
    handleMouseMove(e) {
      if (Math.abs(e.clientX - this.dragStartX) > 5 || Math.abs(e.clientY - this.dragStartY) > 5) {
        this.isDragging = true
      }
      
      if (this.isDragging) {
        const deltaX = e.clientX - this.dragStartX
        const deltaY = e.clientY - this.dragStartY
        
        let newX = this.buttonStartX + deltaX
        let newY = this.buttonStartY + deltaY
        
        // è¾¹ç•Œæ£€æµ‹
        const buttonWidth = this.$refs.floatButton.offsetWidth
        const buttonHeight = this.$refs.floatButton.offsetHeight
        
        newX = Math.max(0, Math.min(newX, window.innerWidth - buttonWidth))
        newY = Math.max(0, Math.min(newY, window.innerHeight - buttonHeight))
        
        this.x = newX
        this.y = newY
      }
    },
    
    // é¼ æ ‡é‡Šæ”¾å¤„ç†
    handleMouseUp() {
      if (!this.isDragging && Date.now() - this.clickStartTime < 200) {
        // å¦‚æœæ²¡æœ‰æ‹–æ‹½ä¸”æ—¶é—´å¾ˆçŸ­ï¼Œè®¤ä¸ºæ˜¯ç‚¹å‡»äº‹ä»¶
        this.toggleWindow()
      }
      this.isDragging = false
    },
    
    // åˆ‡æ¢çª—å£æ˜¾ç¤ºçŠ¶æ€
    toggleWindow() {
      this.$emit('toggle-window')
    }
  }
}
</script>

<style scoped>
.float-button {
  position: fixed;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 25px;
  padding: 12px 16px;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  z-index: 9998;
  user-select: none;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: all 0.3s ease;
}

.float-button:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
}

.icon {
  font-size: 18px;
}

.button-text {
  font-size: 14px;
  font-weight: 500;
}
</style>
```

# å››ã€ä½¿ç”¨ç¤ºä¾‹

## ï¼ˆä¸€ï¼‰åœ¨é¡µé¢ä¸­ä½¿ç”¨ç»„ä»¶

```vue
<template>
  <div class="page-container">
    <!-- é¡µé¢ä¸»è¦å†…å®¹ -->
    <div class="main-content">
      <h1>è®¾å¤‡å–æ•°é¡µé¢</h1>
      <el-form>
        <el-form-item label="æ•°å€¼1">
          <el-input v-model="form.value1" placeholder="è¯·è¾“å…¥æˆ–é€‰æ‹©è®¾å¤‡æ•°æ®"></el-input>
        </el-form-item>
        <el-form-item label="æ•°å€¼2">
          <el-input v-model="form.value2" placeholder="è¯·è¾“å…¥æˆ–é€‰æ‹©è®¾å¤‡æ•°æ®"></el-input>
        </el-form-item>
      </el-form>
    </div>
    
    <!-- æ‚¬æµ®æŒ‰é’® -->
    <FloatButton
      icon="ğŸ“Š"
      text="è®¾å¤‡å–æ•°"
      @toggle-window="toggleDeviceWindow"
    />
    
    <!-- æ‚¬æµ®çª—å£ -->
    <FloatWindow
      v-if="showDeviceWindow"
      title="è®¾å¤‡å–æ•°æ•°æ®"
      :initial-width="500"
      :initial-height="400"
      @close="closeDeviceWindow"
      @minimize="minimizeDeviceWindow"
    >
      <!-- è®¾å¤‡æ•°æ®åˆ—è¡¨ -->
      <div class="device-data-list">
        <el-table :data="deviceData" @row-click="selectDeviceData">
          <el-table-column prop="timestamp" label="æ—¶é—´" width="150"></el-table-column>
          <el-table-column prop="deviceId" label="è®¾å¤‡ID" width="100"></el-table-column>
          <el-table-column prop="value" label="æ•°å€¼"></el-table-column>
          <el-table-column prop="unit" label="å•ä½" width="80"></el-table-column>
        </el-table>
      </div>
    </FloatWindow>
  </div>
</template>

<script>
import FloatButton from '@/components/FloatButton.vue'
import FloatWindow from '@/components/FloatWindow.vue'

export default {
  name: 'DeviceDataPage',
  components: {
    FloatButton,
    FloatWindow
  },
  data() {
    return {
      showDeviceWindow: false,
      form: {
        value1: '',
        value2: ''
      },
      deviceData: [
        {
          timestamp: '2024-08-29 10:30:15',
          deviceId: 'DEV001',
          value: '25.6',
          unit: 'Â°C'
        },
        {
          timestamp: '2024-08-29 10:31:20',
          deviceId: 'DEV001',
          value: '26.1',
          unit: 'Â°C'
        }
        // ... æ›´å¤šæ•°æ®
      ]
    }
  },
  methods: {
    // åˆ‡æ¢è®¾å¤‡çª—å£æ˜¾ç¤º
    toggleDeviceWindow() {
      this.showDeviceWindow = !this.showDeviceWindow
    },
    
    // å…³é—­è®¾å¤‡çª—å£
    closeDeviceWindow() {
      this.showDeviceWindow = false
    },
    
    // æœ€å°åŒ–è®¾å¤‡çª—å£
    minimizeDeviceWindow() {
      this.showDeviceWindow = false
    },
    
    // é€‰æ‹©è®¾å¤‡æ•°æ®
    selectDeviceData(row) {
      // å°†é€‰ä¸­çš„æ•°æ®å¡«å…¥è¡¨å•
      if (!this.form.value1) {
        this.form.value1 = row.value
      } else if (!this.form.value2) {
        this.form.value2 = row.value
      }
      
      // æç¤ºç”¨æˆ·
      this.$message.success(`å·²é€‰æ‹©æ•°æ®ï¼š${row.value} ${row.unit}`)
    }
  }
}
</script>

<style scoped>
.page-container {
  padding: 20px;
}

.main-content {
  max-width: 800px;
  margin: 0 auto;
}

.device-data-list {
  height: 300px;
  overflow-y: auto;
}
</style>
```

## ï¼ˆäºŒï¼‰ç»„ä»¶æ³¨å†Œ

åœ¨`main.js`ä¸­å…¨å±€æ³¨å†Œç»„ä»¶ï¼š

```javascript
import { createApp } from 'vue'
import App from './App.vue'
import FloatButton from '@/components/FloatButton.vue'
import FloatWindow from '@/components/FloatWindow.vue'

const app = createApp(App)

// å…¨å±€æ³¨å†Œæ‚¬æµ®ç»„ä»¶
app.component('FloatButton', FloatButton)
app.component('FloatWindow', FloatWindow)

app.mount('#app')
```

# äº”ã€åŠŸèƒ½ç‰¹ç‚¹

## ï¼ˆä¸€ï¼‰æŠ€æœ¯ç‰¹ç‚¹

1. **å®Œå…¨è‡ªå®šä¹‰**ï¼šä¸ä¾èµ–ç¬¬ä¸‰æ–¹ç»„ä»¶åº“ï¼Œå®Œå…¨å¯æ§
2. **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒä¸åŒå±å¹•å°ºå¯¸çš„é€‚é…
3. **äº‹ä»¶é©±åŠ¨**ï¼šé€šè¿‡äº‹ä»¶é€šä¿¡ï¼Œç»„ä»¶é—´è§£è€¦
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨è®¡ç®—å±æ€§å’Œäº‹ä»¶å§”æ‰˜ä¼˜åŒ–æ€§èƒ½

## ï¼ˆäºŒï¼‰ç”¨æˆ·ä½“éªŒ

1. **ç›´è§‚æ“ä½œ**ï¼šæ‹–æ‹½å’Œè°ƒèŠ‚å¤§å°æ“ä½œç¬¦åˆç”¨æˆ·ä¹ æƒ¯
2. **è§†è§‰åé¦ˆ**ï¼šé¼ æ ‡æ‚¬åœå’Œæ‹–æ‹½æ—¶çš„è§†è§‰æ•ˆæœ
3. **è¾¹ç•Œä¿æŠ¤**ï¼šé˜²æ­¢çª—å£æ‹–æ‹½åˆ°å±å¹•å¤–
4. **æœ€å°å°ºå¯¸é™åˆ¶**ï¼šç¡®ä¿çª—å£å†…å®¹å¯è§

## ï¼ˆä¸‰ï¼‰æ‰©å±•æ€§

1. **æ’æ§½æ”¯æŒ**ï¼šçª—å£å†…å®¹å®Œå…¨å¯å®šåˆ¶
2. **äº‹ä»¶æœºåˆ¶**ï¼šæ”¯æŒè‡ªå®šä¹‰äº‹ä»¶å¤„ç†
3. **æ ·å¼å®šåˆ¶**ï¼šCSSå˜é‡æ”¯æŒä¸»é¢˜å®šåˆ¶
4. **é…ç½®çµæ´»**ï¼šä¸°å¯Œçš„propsé…ç½®é€‰é¡¹

# å…­ã€æ€»ç»“

é€šè¿‡å®ç°è¿™ä¸ªæ‚¬æµ®çª—å£ç»„ä»¶ï¼Œæˆ‘ä»¬è§£å†³äº†è®¾å¤‡å–æ•°åŠŸèƒ½ä¸­çš„ç”¨æˆ·ä½“éªŒé—®é¢˜ã€‚è¯¥ç»„ä»¶å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

1. **ç‹¬ç«‹æ€§å¼º**ï¼šæ‚¬æµ®çª—å£ä¸ä¼šé˜»å¡é¡µé¢å…¶ä»–æ“ä½œ
2. **äº¤äº’å‹å¥½**ï¼šæ”¯æŒæ‹–æ‹½ç§»åŠ¨å’Œå¤§å°è°ƒèŠ‚
3. **å¤ç”¨æ€§å¥½**ï¼šç»„ä»¶åŒ–è®¾è®¡ï¼Œå¯åœ¨å¤šä¸ªé¡µé¢å¤ç”¨
4. **æ‰©å±•æ€§å¼º**ï¼šé€šè¿‡æ’æ§½å’Œäº‹ä»¶æ”¯æŒå„ç§å®šåˆ¶éœ€æ±‚

è¿™ç§è®¾è®¡æ¨¡å¼ç‰¹åˆ«é€‚ç”¨äºéœ€è¦åœ¨ä¸å½±å“ä¸»è¦å·¥ä½œæµç¨‹çš„æƒ…å†µä¸‹ï¼Œæä¾›è¾…åŠ©åŠŸèƒ½çš„åœºæ™¯ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚å¯¹ç»„ä»¶è¿›è¡Œè¿›ä¸€æ­¥çš„ä¼˜åŒ–å’Œæ‰©å±•ã€‚

## å‚è€ƒèµ„æ–™

1. Vue.jså®˜æ–¹æ–‡æ¡£ - ç»„ä»¶å¼€å‘æŒ‡å—
2. MDN Web Docs - é¼ æ ‡äº‹ä»¶å¤„ç†
3. CSS-Tricks - æ‹–æ‹½åŠŸèƒ½å®ç°
4. Vueå¯æ‹–æ‹½ç¼©æ”¾ç»„ä»¶æ•™ç¨‹ï¼švue-draggable-resizable ä½¿ç”¨æŒ‡å— <mcreference link="https://blog.csdn.net/gitblog_01140/article/details/141344870" index="1">1</mcreference>
5. é¡µé¢æ‚¬æµ®æŒ‰é’®å¯æ‹–åŠ¨å®ç°ï¼ˆvue2å’Œvue3å†™æ³•ï¼‰ <mcreference link="https://www.cnblogs.com/deng-jie/p/16408876.html" index="2">2</mcreference>

