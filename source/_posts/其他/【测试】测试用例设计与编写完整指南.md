---
title: ã€æµ‹è¯•ã€‘æµ‹è¯•ç”¨ä¾‹è®¾è®¡ä¸ç¼–å†™å®Œæ•´æŒ‡å—
date: 2025-07-18
categories: æµ‹è¯•
tags:
  - æµ‹è¯•ç”¨ä¾‹
  - è½¯ä»¶æµ‹è¯•
  - è´¨é‡ä¿è¯
  - å•å…ƒæµ‹è¯•
  - é›†æˆæµ‹è¯•
  - è‡ªåŠ¨åŒ–æµ‹è¯•
---

# æµ‹è¯•ç”¨ä¾‹è®¾è®¡ä¸ç¼–å†™å®Œæ•´æŒ‡å—

## å‰è¨€

æµ‹è¯•ç”¨ä¾‹æ˜¯è½¯ä»¶æµ‹è¯•çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼Œæ˜¯éªŒè¯è½¯ä»¶åŠŸèƒ½ã€æ€§èƒ½å’Œè´¨é‡çš„é‡è¦æ‰‹æ®µã€‚ä¸€ä¸ªå¥½çš„æµ‹è¯•ç”¨ä¾‹ä¸ä»…èƒ½å¤Ÿå‘ç°è½¯ä»¶ç¼ºé™·ï¼Œè¿˜èƒ½ç¡®ä¿è½¯ä»¶æ»¡è¶³ç”¨æˆ·éœ€æ±‚å’Œä¸šåŠ¡è¦æ±‚ã€‚æœ¬æ–‡å°†å…¨é¢ä»‹ç»æµ‹è¯•ç”¨ä¾‹çš„è®¾è®¡åŸåˆ™ã€ç¼–å†™æ–¹æ³•ã€ç®¡ç†ç­–ç•¥ä»¥åŠæœ€ä½³å®è·µï¼Œå¸®åŠ©æµ‹è¯•å·¥ç¨‹å¸ˆå’Œå¼€å‘äººå‘˜æŒæ¡æµ‹è¯•ç”¨ä¾‹çš„æ ¸å¿ƒæŠ€èƒ½ã€‚

## ä¸€ã€æµ‹è¯•ç”¨ä¾‹åŸºç¡€æ¦‚å¿µ

### 1.1 ä»€ä¹ˆæ˜¯æµ‹è¯•ç”¨ä¾‹

æµ‹è¯•ç”¨ä¾‹ï¼ˆTest Caseï¼‰æ˜¯ä¸ºäº†éªŒè¯è½¯ä»¶ç³»ç»Ÿçš„ç‰¹å®šåŠŸèƒ½æˆ–ç‰¹æ€§è€Œè®¾è®¡çš„ä¸€ç»„æµ‹è¯•æ­¥éª¤ã€æµ‹è¯•æ•°æ®å’Œé¢„æœŸç»“æœçš„é›†åˆã€‚

#### æµ‹è¯•ç”¨ä¾‹çš„ç»„æˆè¦ç´ 
```
æµ‹è¯•ç”¨ä¾‹ = {
    ç”¨ä¾‹ç¼–å·: "TC_001",
    ç”¨ä¾‹æ ‡é¢˜: "ç”¨æˆ·ç™»å½•åŠŸèƒ½éªŒè¯",
    æµ‹è¯•ç›®æ ‡: "éªŒè¯ç”¨æˆ·èƒ½å¤Ÿæ­£å¸¸ç™»å½•ç³»ç»Ÿ",
    å‰ç½®æ¡ä»¶: "ç”¨æˆ·å·²æ³¨å†Œä¸”è´¦å·çŠ¶æ€æ­£å¸¸",
    æµ‹è¯•æ­¥éª¤: [
        "1. æ‰“å¼€ç™»å½•é¡µé¢",
        "2. è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç ",
        "3. ç‚¹å‡»ç™»å½•æŒ‰é’®"
    ],
    æµ‹è¯•æ•°æ®: {
        ç”¨æˆ·å: "testuser@example.com",
        å¯†ç : "Password123"
    },
    é¢„æœŸç»“æœ: "ç”¨æˆ·æˆåŠŸç™»å½•ï¼Œè·³è½¬åˆ°ä¸»é¡µé¢",
    å®é™…ç»“æœ: "",
    æµ‹è¯•çŠ¶æ€: "å¾…æ‰§è¡Œ",
    ä¼˜å…ˆçº§: "é«˜",
    æ‰§è¡Œäºº: "å¼ ä¸‰",
    æ‰§è¡Œæ—¶é—´: "2025-07-18"
}
```

### 1.2 æµ‹è¯•ç”¨ä¾‹çš„ä»·å€¼

#### è´¨é‡ä¿è¯ä»·å€¼
- **ç¼ºé™·å‘ç°**ï¼šç³»ç»Ÿæ€§åœ°å‘ç°è½¯ä»¶ç¼ºé™·
- **éœ€æ±‚éªŒè¯**ï¼šç¡®ä¿è½¯ä»¶æ»¡è¶³ä¸šåŠ¡éœ€æ±‚
- **å›å½’æµ‹è¯•**ï¼šç¡®ä¿æ–°åŠŸèƒ½ä¸å½±å“ç°æœ‰åŠŸèƒ½
- **é£é™©æ§åˆ¶**ï¼šé™ä½è½¯ä»¶å‘å¸ƒé£é™©

#### é¡¹ç›®ç®¡ç†ä»·å€¼
- **è¿›åº¦è·Ÿè¸ª**ï¼šé€šè¿‡ç”¨ä¾‹æ‰§è¡Œç‡ç›‘æ§æµ‹è¯•è¿›åº¦
- **è´¨é‡åº¦é‡**ï¼šé€šè¿‡ç¼ºé™·å¯†åº¦è¯„ä¼°è½¯ä»¶è´¨é‡
- **èµ„æºè§„åˆ’**ï¼šä¼°ç®—æµ‹è¯•å·¥ä½œé‡å’Œæ—¶é—´
- **æ²Ÿé€šå·¥å…·**ï¼šå›¢é˜Ÿé—´çš„æ²Ÿé€šå’Œåä½œåŸºç¡€

### 1.3 æµ‹è¯•ç”¨ä¾‹åˆ†ç±»

#### æŒ‰æµ‹è¯•å±‚çº§åˆ†ç±»
```
æµ‹è¯•é‡‘å­—å¡”ï¼š
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   E2Eæµ‹è¯•       â”‚  â† å°‘é‡ï¼Œé«˜ä»·å€¼
    â”‚   (ç«¯åˆ°ç«¯æµ‹è¯•)   â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚   é›†æˆæµ‹è¯•       â”‚  â† é€‚é‡ï¼Œå…³é”®è·¯å¾„
    â”‚   (APIæµ‹è¯•)     â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚   å•å…ƒæµ‹è¯•       â”‚  â† å¤§é‡ï¼Œå¿«é€Ÿåé¦ˆ
    â”‚   (å‡½æ•°/æ–¹æ³•)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æŒ‰æµ‹è¯•ç±»å‹åˆ†ç±»
- **åŠŸèƒ½æµ‹è¯•ç”¨ä¾‹**ï¼šéªŒè¯åŠŸèƒ½æ˜¯å¦æ­£ç¡®å®ç°
- **æ€§èƒ½æµ‹è¯•ç”¨ä¾‹**ï¼šéªŒè¯ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡
- **å®‰å…¨æµ‹è¯•ç”¨ä¾‹**ï¼šéªŒè¯ç³»ç»Ÿå®‰å…¨æ€§
- **å…¼å®¹æ€§æµ‹è¯•ç”¨ä¾‹**ï¼šéªŒè¯è·¨å¹³å°å…¼å®¹æ€§
- **æ˜“ç”¨æ€§æµ‹è¯•ç”¨ä¾‹**ï¼šéªŒè¯ç”¨æˆ·ä½“éªŒ

## äºŒã€æµ‹è¯•ç”¨ä¾‹è®¾è®¡æ–¹æ³•

### 2.1 ç­‰ä»·ç±»åˆ’åˆ†æ³•

#### åŸºæœ¬åŸç†
å°†è¾“å…¥åŸŸåˆ’åˆ†ä¸ºè‹¥å¹²ç­‰ä»·ç±»ï¼Œä»æ¯ä¸ªç­‰ä»·ç±»ä¸­é€‰å–ä»£è¡¨æ€§æ•°æ®è¿›è¡Œæµ‹è¯•ã€‚

#### å®é™…åº”ç”¨ç¤ºä¾‹
```javascript
// ç”¨æˆ·å¹´é¾„éªŒè¯åŠŸèƒ½æµ‹è¯•
function validateAge(age) {
    if (age < 0) return "å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°";
    if (age < 18) return "æœªæˆå¹´ç”¨æˆ·";
    if (age <= 65) return "æˆå¹´ç”¨æˆ·";
    if (age > 65) return "è€å¹´ç”¨æˆ·";
    if (age > 150) return "å¹´é¾„è¶…å‡ºåˆç†èŒƒå›´";
}

// ç­‰ä»·ç±»åˆ’åˆ†
const testCases = [
    // æœ‰æ•ˆç­‰ä»·ç±»
    { input: 5, expected: "æœªæˆå¹´ç”¨æˆ·", description: "æœ‰æ•ˆå¹´é¾„-å„¿ç«¥" },
    { input: 25, expected: "æˆå¹´ç”¨æˆ·", description: "æœ‰æ•ˆå¹´é¾„-æˆå¹´" },
    { input: 70, expected: "è€å¹´ç”¨æˆ·", description: "æœ‰æ•ˆå¹´é¾„-è€å¹´" },
    
    // æ— æ•ˆç­‰ä»·ç±»
    { input: -5, expected: "å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°", description: "æ— æ•ˆå¹´é¾„-è´Ÿæ•°" },
    { input: 200, expected: "å¹´é¾„è¶…å‡ºåˆç†èŒƒå›´", description: "æ— æ•ˆå¹´é¾„-è¶…å¤§å€¼" },
    { input: "abc", expected: "è¾“å…¥æ ¼å¼é”™è¯¯", description: "æ— æ•ˆå¹´é¾„-éæ•°å­—" }
];
```

### 2.2 è¾¹ç•Œå€¼åˆ†ææ³•

#### åŸºæœ¬åŸç†
é‡ç‚¹æµ‹è¯•è¾“å…¥åŸŸè¾¹ç•Œä¸Šå’Œè¾¹ç•Œé™„è¿‘çš„å€¼ï¼Œå› ä¸ºè¾¹ç•Œå¤„æœ€å®¹æ˜“å‡ºç°é”™è¯¯ã€‚

#### è¾¹ç•Œå€¼æµ‹è¯•ç¤ºä¾‹
```python
def test_password_length_validation():
    """å¯†ç é•¿åº¦éªŒè¯çš„è¾¹ç•Œå€¼æµ‹è¯•"""
    
    # è¾¹ç•Œå€¼ï¼šæœ€å°é•¿åº¦8ï¼Œæœ€å¤§é•¿åº¦20
    boundary_test_cases = [
        # ä¸‹è¾¹ç•Œæµ‹è¯•
        ("1234567", False, "7ä½å¯†ç -ä½äºæœ€å°é•¿åº¦"),
        ("12345678", True, "8ä½å¯†ç -æœ€å°é•¿åº¦è¾¹ç•Œ"),
        ("123456789", True, "9ä½å¯†ç -æœ€å°é•¿åº¦+1"),
        
        # ä¸Šè¾¹ç•Œæµ‹è¯•
        ("12345678901234567890", True, "20ä½å¯†ç -æœ€å¤§é•¿åº¦è¾¹ç•Œ"),
        ("123456789012345678901", False, "21ä½å¯†ç -è¶…è¿‡æœ€å¤§é•¿åº¦"),
        ("1234567890123456789", True, "19ä½å¯†ç -æœ€å¤§é•¿åº¦-1"),
        
        # ç‰¹æ®Šè¾¹ç•Œ
        ("", False, "ç©ºå¯†ç "),
        (None, False, "ç©ºå€¼å¯†ç ")
    ]
    
    for password, expected, description in boundary_test_cases:
        result = validate_password_length(password)
        assert result == expected, f"æµ‹è¯•å¤±è´¥: {description}"
```

### 2.3 å†³ç­–è¡¨æ³•

#### é€‚ç”¨åœºæ™¯
å½“ç³»ç»Ÿè¡Œä¸ºä¾èµ–äºå¤šä¸ªæ¡ä»¶çš„ç»„åˆæ—¶ï¼Œä½¿ç”¨å†³ç­–è¡¨æ³•èƒ½å¤Ÿç³»ç»Ÿæ€§åœ°è¦†ç›–æ‰€æœ‰å¯èƒ½çš„æ¡ä»¶ç»„åˆã€‚

#### å†³ç­–è¡¨ç¤ºä¾‹
```
ç”¨æˆ·æƒé™éªŒè¯å†³ç­–è¡¨ï¼š

æ¡ä»¶\è§„åˆ™    | R1 | R2 | R3 | R4 | R5 | R6 | R7 | R8
------------|----|----|----|----|----|----|----|----|
ç”¨æˆ·å·²ç™»å½•   | Y  | Y  | Y  | Y  | N  | N  | N  | N
ç”¨æˆ·å·²æ¿€æ´»   | Y  | Y  | N  | N  | Y  | Y  | N  | N
æœ‰è®¿é—®æƒé™   | Y  | N  | Y  | N  | Y  | N  | Y  | N
------------|----|----|----|----|----|----|----|----|
å…è®¸è®¿é—®     | Y  | N  | N  | N  | N  | N  | N  | N
æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ | N  | Y  | Y  | Y  | Y  | Y  | Y  | Y
```

```javascript
// åŸºäºå†³ç­–è¡¨çš„æµ‹è¯•ç”¨ä¾‹
const permissionTestCases = [
    {
        name: "R1-å®Œå…¨æˆæƒç”¨æˆ·",
        conditions: { loggedIn: true, activated: true, hasPermission: true },
        expected: { allowAccess: true, showError: false }
    },
    {
        name: "R2-æ— æƒé™çš„å·²æ¿€æ´»ç”¨æˆ·",
        conditions: { loggedIn: true, activated: true, hasPermission: false },
        expected: { allowAccess: false, showError: true }
    },
    {
        name: "R5-æœªç™»å½•ä½†æœ‰æƒé™ç”¨æˆ·",
        conditions: { loggedIn: false, activated: true, hasPermission: true },
        expected: { allowAccess: false, showError: true }
    }
    // ... å…¶ä»–è§„åˆ™
];
```

### 2.4 çŠ¶æ€è½¬æ¢æµ‹è¯•

#### çŠ¶æ€å›¾å»ºæ¨¡
```javascript
// è®¢å•çŠ¶æ€è½¬æ¢æµ‹è¯•
class OrderStateMachine {
    constructor() {
        this.state = 'CREATED';
        this.validTransitions = {
            'CREATED': ['PAID', 'CANCELLED'],
            'PAID': ['SHIPPED', 'REFUNDED'],
            'SHIPPED': ['DELIVERED', 'RETURNED'],
            'DELIVERED': ['COMPLETED'],
            'CANCELLED': [],
            'REFUNDED': [],
            'RETURNED': ['REFUNDED'],
            'COMPLETED': []
        };
    }
    
    transition(newState) {
        if (this.validTransitions[this.state].includes(newState)) {
            this.state = newState;
            return true;
        }
        return false;
    }
}

// çŠ¶æ€è½¬æ¢æµ‹è¯•ç”¨ä¾‹
const stateTransitionTests = [
    {
        name: "æ­£å¸¸è®¢å•æµç¨‹",
        transitions: ['CREATED', 'PAID', 'SHIPPED', 'DELIVERED', 'COMPLETED'],
        expected: true
    },
    {
        name: "è®¢å•å–æ¶ˆæµç¨‹",
        transitions: ['CREATED', 'CANCELLED'],
        expected: true
    },
    {
        name: "æ— æ•ˆçŠ¶æ€è½¬æ¢",
        transitions: ['CREATED', 'SHIPPED'], // è·³è¿‡æ”¯ä»˜ç›´æ¥å‘è´§
        expected: false
    }
];
```

## ä¸‰ã€ä¸åŒç±»å‹çš„æµ‹è¯•ç”¨ä¾‹

### 3.1 å•å…ƒæµ‹è¯•ç”¨ä¾‹

#### å‡½æ•°çº§æµ‹è¯•
```python
import unittest
from unittest.mock import patch, Mock

class TestCalculator(unittest.TestCase):
    
    def setUp(self):
        """æµ‹è¯•å‰ç½®æ¡ä»¶"""
        self.calculator = Calculator()
    
    def test_add_positive_numbers(self):
        """æµ‹è¯•æ­£æ•°ç›¸åŠ """
        result = self.calculator.add(2, 3)
        self.assertEqual(result, 5)
    
    def test_add_negative_numbers(self):
        """æµ‹è¯•è´Ÿæ•°ç›¸åŠ """
        result = self.calculator.add(-2, -3)
        self.assertEqual(result, -5)
    
    def test_divide_by_zero(self):
        """æµ‹è¯•é™¤é›¶å¼‚å¸¸"""
        with self.assertRaises(ZeroDivisionError):
            self.calculator.divide(10, 0)
    
    @patch('requests.get')
    def test_api_call_with_mock(self, mock_get):
        """æµ‹è¯•APIè°ƒç”¨ï¼ˆä½¿ç”¨Mockï¼‰"""
        # è®¾ç½®Mockè¿”å›å€¼
        mock_response = Mock()
        mock_response.json.return_value = {'result': 'success'}
        mock_response.status_code = 200
        mock_get.return_value = mock_response
        
        # æ‰§è¡Œæµ‹è¯•
        result = self.calculator.fetch_data('http://api.example.com')
        
        # éªŒè¯ç»“æœ
        self.assertEqual(result['result'], 'success')
        mock_get.assert_called_once_with('http://api.example.com')
```

### 3.2 é›†æˆæµ‹è¯•ç”¨ä¾‹

#### APIé›†æˆæµ‹è¯•
```javascript
// Jest + Supertest APIæµ‹è¯•
const request = require('supertest');
const app = require('../app');

describe('User API Integration Tests', () => {
    let authToken;
    let userId;
    
    beforeAll(async () => {
        // æµ‹è¯•å‰ç½®ï¼šåˆ›å»ºæµ‹è¯•ç”¨æˆ·å¹¶è·å–è®¤è¯token
        const response = await request(app)
            .post('/api/auth/login')
            .send({
                email: 'test@example.com',
                password: 'testpassword'
            });
        
        authToken = response.body.token;
    });
    
    describe('POST /api/users', () => {
        it('should create a new user with valid data', async () => {
            const userData = {
                name: 'Test User',
                email: 'newuser@example.com',
                password: 'password123'
            };
            
            const response = await request(app)
                .post('/api/users')
                .set('Authorization', `Bearer ${authToken}`)
                .send(userData)
                .expect(201);
            
            expect(response.body).toHaveProperty('id');
            expect(response.body.name).toBe(userData.name);
            expect(response.body.email).toBe(userData.email);
            expect(response.body).not.toHaveProperty('password');
            
            userId = response.body.id;
        });
        
        it('should return 400 for invalid email format', async () => {
            const invalidData = {
                name: 'Test User',
                email: 'invalid-email',
                password: 'password123'
            };
            
            const response = await request(app)
                .post('/api/users')
                .set('Authorization', `Bearer ${authToken}`)
                .send(invalidData)
                .expect(400);
            
            expect(response.body).toHaveProperty('error');
            expect(response.body.error).toContain('email');
        });
    });
    
    describe('GET /api/users/:id', () => {
        it('should retrieve user by id', async () => {
            const response = await request(app)
                .get(`/api/users/${userId}`)
                .set('Authorization', `Bearer ${authToken}`)
                .expect(200);
            
            expect(response.body.id).toBe(userId);
            expect(response.body).toHaveProperty('name');
            expect(response.body).toHaveProperty('email');
        });
        
        it('should return 404 for non-existent user', async () => {
            await request(app)
                .get('/api/users/999999')
                .set('Authorization', `Bearer ${authToken}`)
                .expect(404);
        });
    });
    
    afterAll(async () => {
        // æµ‹è¯•åæ¸…ç†ï¼šåˆ é™¤æµ‹è¯•æ•°æ®
        if (userId) {
            await request(app)
                .delete(`/api/users/${userId}`)
                .set('Authorization', `Bearer ${authToken}`);
        }
    });
});
```

### 3.3 ç«¯åˆ°ç«¯æµ‹è¯•ç”¨ä¾‹

#### Webåº”ç”¨E2Eæµ‹è¯•
```javascript
// Cypress E2Eæµ‹è¯•
describe('E-commerce User Journey', () => {
    beforeEach(() => {
        // è®¿é—®é¦–é¡µ
        cy.visit('/');
        
        // æ¸…é™¤è´­ç‰©è½¦
        cy.clearLocalStorage();
        cy.clearCookies();
    });
    
    it('å®Œæ•´çš„è´­ä¹°æµç¨‹', () => {
        // 1. ç”¨æˆ·æ³¨å†Œ/ç™»å½•
        cy.get('[data-testid="login-button"]').click();
        cy.get('[data-testid="email-input"]').type('test@example.com');
        cy.get('[data-testid="password-input"]').type('password123');
        cy.get('[data-testid="submit-button"]').click();
        
        // éªŒè¯ç™»å½•æˆåŠŸ
        cy.get('[data-testid="user-menu"]').should('be.visible');
        cy.get('[data-testid="user-name"]').should('contain', 'Test User');
        
        // 2. æµè§ˆå•†å“
        cy.get('[data-testid="product-category"]').first().click();
        cy.get('[data-testid="product-list"]').should('be.visible');
        
        // 3. æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦
        cy.get('[data-testid="product-item"]').first().click();
        cy.get('[data-testid="add-to-cart"]').click();
        
        // éªŒè¯æ·»åŠ æˆåŠŸ
        cy.get('[data-testid="cart-count"]').should('contain', '1');
        cy.get('[data-testid="success-message"]').should('be.visible');
        
        // 4. æŸ¥çœ‹è´­ç‰©è½¦
        cy.get('[data-testid="cart-icon"]').click();
        cy.get('[data-testid="cart-items"]').should('have.length', 1);
        
        // 5. ç»“ç®—æµç¨‹
        cy.get('[data-testid="checkout-button"]').click();
        
        // å¡«å†™é…é€ä¿¡æ¯
        cy.get('[data-testid="shipping-address"]').type('123 Test Street');
        cy.get('[data-testid="shipping-city"]').type('Test City');
        cy.get('[data-testid="shipping-zip"]').type('12345');
        
        // é€‰æ‹©æ”¯ä»˜æ–¹å¼
        cy.get('[data-testid="payment-method-card"]').click();
        cy.get('[data-testid="card-number"]').type('4111111111111111');
        cy.get('[data-testid="card-expiry"]').type('12/25');
        cy.get('[data-testid="card-cvv"]').type('123');
        
        // 6. å®Œæˆè®¢å•
        cy.get('[data-testid="place-order"]').click();
        
        // éªŒè¯è®¢å•æˆåŠŸ
        cy.get('[data-testid="order-confirmation"]').should('be.visible');
        cy.get('[data-testid="order-number"]').should('exist');
        
        // 7. æŸ¥çœ‹è®¢å•å†å²
        cy.get('[data-testid="user-menu"]').click();
        cy.get('[data-testid="order-history"]').click();
        cy.get('[data-testid="order-list"]').should('contain', 'è®¢å•');
    });
    
    it('è´­ç‰©è½¦åŠŸèƒ½æµ‹è¯•', () => {
        // ç™»å½•
        cy.login('test@example.com', 'password123');
        
        // æ·»åŠ å¤šä¸ªå•†å“
        cy.addProductToCart('product-1');
        cy.addProductToCart('product-2');
        
        // éªŒè¯è´­ç‰©è½¦æ•°é‡
        cy.get('[data-testid="cart-count"]').should('contain', '2');
        
        // ä¿®æ”¹å•†å“æ•°é‡
        cy.get('[data-testid="cart-icon"]').click();
        cy.get('[data-testid="quantity-input"]').first().clear().type('3');
        cy.get('[data-testid="update-quantity"]').first().click();
        
        // éªŒè¯æ€»ä»·æ›´æ–°
        cy.get('[data-testid="cart-total"]').should('not.contain', '0');
        
        // åˆ é™¤å•†å“
        cy.get('[data-testid="remove-item"]').first().click();
        cy.get('[data-testid="confirm-remove"]').click();
        
        // éªŒè¯å•†å“å·²åˆ é™¤
        cy.get('[data-testid="cart-items"]').should('have.length', 1);
    });
});
```

## å››ã€æµ‹è¯•ç”¨ä¾‹ç®¡ç†

### 4.1 æµ‹è¯•ç”¨ä¾‹ç»„ç»‡ç»“æ„

#### åˆ†å±‚ç»„ç»‡æ–¹å¼
```
æµ‹è¯•ç”¨ä¾‹ç›®å½•ç»“æ„ï¼š
project-tests/
â”œâ”€â”€ unit-tests/                 # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ services/
â”‚   â””â”€â”€ utils/
â”œâ”€â”€ integration-tests/          # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ database/
â”‚   â””â”€â”€ external-services/
â”œâ”€â”€ e2e-tests/                  # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â”œâ”€â”€ user-journeys/
â”‚   â”œâ”€â”€ admin-workflows/
â”‚   â””â”€â”€ mobile-scenarios/
â”œâ”€â”€ performance-tests/          # æ€§èƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ load-tests/
â”‚   â”œâ”€â”€ stress-tests/
â”‚   â””â”€â”€ spike-tests/
â””â”€â”€ security-tests/             # å®‰å…¨æµ‹è¯•
    â”œâ”€â”€ authentication/
    â”œâ”€â”€ authorization/
    â””â”€â”€ data-validation/
```

### 4.2 æµ‹è¯•ç”¨ä¾‹æ ‡è¯†ä¸å‘½å

#### å‘½åè§„èŒƒ
```javascript
// æµ‹è¯•ç”¨ä¾‹å‘½åè§„èŒƒ
const testCaseNamingConvention = {
    // æ ¼å¼ï¼š[æ¨¡å—]_[åŠŸèƒ½]_[åœºæ™¯]_[é¢„æœŸç»“æœ]
    examples: [
        "USER_LOGIN_VALID_CREDENTIALS_SUCCESS",
        "USER_LOGIN_INVALID_PASSWORD_FAILURE",
        "CART_ADD_ITEM_DUPLICATE_PRODUCT_UPDATE_QUANTITY",
        "PAYMENT_PROCESS_EXPIRED_CARD_ERROR_MESSAGE",
        "ADMIN_USER_DELETE_ACTIVE_USER_CONFIRMATION_REQUIRED"
    ],
    
    // ç¼–å·è§„èŒƒ
    numbering: {
        format: "TC_[æ¨¡å—ä»£ç ]_[åºå·]",
        examples: [
            "TC_USER_001", // ç”¨æˆ·æ¨¡å—ç¬¬1ä¸ªæµ‹è¯•ç”¨ä¾‹
            "TC_CART_015", // è´­ç‰©è½¦æ¨¡å—ç¬¬15ä¸ªæµ‹è¯•ç”¨ä¾‹
            "TC_PAY_008"   // æ”¯ä»˜æ¨¡å—ç¬¬8ä¸ªæµ‹è¯•ç”¨ä¾‹
        ]
    }
};
```

### 4.3 æµ‹è¯•æ•°æ®ç®¡ç†

#### æµ‹è¯•æ•°æ®åˆ†ç±»
```javascript
// æµ‹è¯•æ•°æ®ç®¡ç†ç­–ç•¥
const testDataManagement = {
    // é™æ€æµ‹è¯•æ•°æ®
    staticData: {
        validUsers: [
            { id: 1, email: "admin@test.com", role: "admin", status: "active" },
            { id: 2, email: "user@test.com", role: "user", status: "active" },
            { id: 3, email: "guest@test.com", role: "guest", status: "inactive" }
        ],
        products: [
            { id: 101, name: "Laptop", price: 999.99, category: "Electronics" },
            { id: 102, name: "Book", price: 29.99, category: "Education" }
        ]
    },

    // åŠ¨æ€æµ‹è¯•æ•°æ®ç”Ÿæˆ
    dynamicData: {
        generateUser: () => ({
            email: `test_${Date.now()}@example.com`,
            password: "TestPass123!",
            firstName: faker.name.firstName(),
            lastName: faker.name.lastName(),
            phone: faker.phone.phoneNumber()
        }),

        generateOrder: (userId) => ({
            userId: userId,
            orderDate: new Date().toISOString(),
            items: [
                { productId: 101, quantity: 2, price: 999.99 },
                { productId: 102, quantity: 1, price: 29.99 }
            ],
            total: 2029.97
        })
    },

    // è¾¹ç•Œå€¼æ•°æ®
    boundaryData: {
        strings: {
            empty: "",
            single: "a",
            maxLength: "a".repeat(255),
            overMaxLength: "a".repeat(256),
            specialChars: "!@#$%^&*()_+-=[]{}|;:,.<>?",
            unicode: "æµ‹è¯•æ•°æ®ğŸš€",
            sql: "'; DROP TABLE users; --"
        },
        numbers: {
            zero: 0,
            negative: -1,
            maxInt: 2147483647,
            minInt: -2147483648,
            decimal: 123.456,
            scientific: 1.23e10
        }
    }
};
```

#### æµ‹è¯•æ•°æ®å·¥å‚æ¨¡å¼
```python
# Pythonæµ‹è¯•æ•°æ®å·¥å‚
import factory
from faker import Faker
from datetime import datetime, timedelta

fake = Faker('zh_CN')

class UserFactory(factory.Factory):
    class Meta:
        model = User

    email = factory.LazyAttribute(lambda obj: f"test_{fake.random_int()}@example.com")
    username = factory.LazyAttribute(lambda obj: fake.user_name())
    first_name = factory.LazyAttribute(lambda obj: fake.first_name())
    last_name = factory.LazyAttribute(lambda obj: fake.last_name())
    phone = factory.LazyAttribute(lambda obj: fake.phone_number())
    birth_date = factory.LazyAttribute(lambda obj: fake.date_of_birth(minimum_age=18, maximum_age=80))
    is_active = True
    created_at = factory.LazyFunction(datetime.now)

class ProductFactory(factory.Factory):
    class Meta:
        model = Product

    name = factory.LazyAttribute(lambda obj: fake.catch_phrase())
    description = factory.LazyAttribute(lambda obj: fake.text(max_nb_chars=200))
    price = factory.LazyAttribute(lambda obj: fake.pydecimal(left_digits=3, right_digits=2, positive=True))
    category = factory.Iterator(['Electronics', 'Books', 'Clothing', 'Home'])
    stock_quantity = factory.LazyAttribute(lambda obj: fake.random_int(min=0, max=1000))

class OrderFactory(factory.Factory):
    class Meta:
        model = Order

    user = factory.SubFactory(UserFactory)
    order_date = factory.LazyFunction(datetime.now)
    status = factory.Iterator(['pending', 'processing', 'shipped', 'delivered', 'cancelled'])
    total_amount = factory.LazyAttribute(lambda obj: fake.pydecimal(left_digits=4, right_digits=2, positive=True))

# ä½¿ç”¨å·¥å‚åˆ›å»ºæµ‹è¯•æ•°æ®
def test_user_creation():
    # åˆ›å»ºå•ä¸ªç”¨æˆ·
    user = UserFactory()
    assert user.email is not None
    assert user.is_active is True

    # æ‰¹é‡åˆ›å»ºç”¨æˆ·
    users = UserFactory.create_batch(10)
    assert len(users) == 10

    # åˆ›å»ºç‰¹å®šå±æ€§çš„ç”¨æˆ·
    admin_user = UserFactory(email="admin@test.com", is_active=True)
    assert admin_user.email == "admin@test.com"
```

## äº”ã€è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹

### 5.1 æµ‹è¯•æ¡†æ¶é€‰æ‹©

#### ä¸åŒè¯­è¨€çš„æµ‹è¯•æ¡†æ¶å¯¹æ¯”
```javascript
// JavaScriptæµ‹è¯•æ¡†æ¶å¯¹æ¯”
const testFrameworks = {
    jest: {
        pros: ["é›¶é…ç½®", "å†…ç½®æ–­è¨€åº“", "å¿«ç…§æµ‹è¯•", "ä»£ç è¦†ç›–ç‡"],
        cons: ["ä¸»è¦é’ˆå¯¹React", "é…ç½®å¤æ‚åœºæ™¯å›°éš¾"],
        bestFor: "Reactåº”ç”¨ã€Node.jsé¡¹ç›®"
    },

    mocha: {
        pros: ["çµæ´»é…ç½®", "ä¸°å¯Œçš„æ’ä»¶", "æ”¯æŒå¤šç§æ–­è¨€åº“"],
        cons: ["éœ€è¦é¢å¤–é…ç½®", "å­¦ä¹ æ›²çº¿é™¡å³­"],
        bestFor: "å¤æ‚é¡¹ç›®ã€éœ€è¦è‡ªå®šä¹‰é…ç½®"
    },

    cypress: {
        pros: ["çœŸå®æµè§ˆå™¨ç¯å¢ƒ", "æ—¶é—´æ—…è¡Œè°ƒè¯•", "è‡ªåŠ¨ç­‰å¾…"],
        cons: ["åªæ”¯æŒChromeç³»", "ä¸æ”¯æŒå¤šæ ‡ç­¾é¡µ"],
        bestFor: "E2Eæµ‹è¯•ã€å‰ç«¯é›†æˆæµ‹è¯•"
    },

    playwright: {
        pros: ["å¤šæµè§ˆå™¨æ”¯æŒ", "å¹¶è¡Œæ‰§è¡Œ", "ç§»åŠ¨ç«¯æµ‹è¯•"],
        cons: ["ç›¸å¯¹è¾ƒæ–°", "å­¦ä¹ æˆæœ¬"],
        bestFor: "è·¨æµè§ˆå™¨E2Eæµ‹è¯•"
    }
};
```

### 5.2 Page Objectæ¨¡å¼

#### é¡µé¢å¯¹è±¡è®¾è®¡
```javascript
// Page Object Model å®ç°
class LoginPage {
    constructor(page) {
        this.page = page;

        // é¡µé¢å…ƒç´ å®šä½å™¨
        this.selectors = {
            emailInput: '[data-testid="email-input"]',
            passwordInput: '[data-testid="password-input"]',
            loginButton: '[data-testid="login-button"]',
            errorMessage: '[data-testid="error-message"]',
            forgotPasswordLink: '[data-testid="forgot-password"]'
        };
    }

    // é¡µé¢æ“ä½œæ–¹æ³•
    async navigate() {
        await this.page.goto('/login');
        await this.page.waitForSelector(this.selectors.emailInput);
    }

    async fillEmail(email) {
        await this.page.fill(this.selectors.emailInput, email);
    }

    async fillPassword(password) {
        await this.page.fill(this.selectors.passwordInput, password);
    }

    async clickLogin() {
        await this.page.click(this.selectors.loginButton);
    }

    async login(email, password) {
        await this.fillEmail(email);
        await this.fillPassword(password);
        await this.clickLogin();
    }

    // éªŒè¯æ–¹æ³•
    async getErrorMessage() {
        return await this.page.textContent(this.selectors.errorMessage);
    }

    async isLoginButtonEnabled() {
        return await this.page.isEnabled(this.selectors.loginButton);
    }

    async waitForRedirect() {
        await this.page.waitForURL('/dashboard');
    }
}

// ä½¿ç”¨Page Objectçš„æµ‹è¯•ç”¨ä¾‹
describe('Login Functionality', () => {
    let loginPage;

    beforeEach(async () => {
        loginPage = new LoginPage(page);
        await loginPage.navigate();
    });

    test('successful login with valid credentials', async () => {
        await loginPage.login('user@example.com', 'password123');
        await loginPage.waitForRedirect();

        expect(page.url()).toContain('/dashboard');
    });

    test('login failure with invalid credentials', async () => {
        await loginPage.login('user@example.com', 'wrongpassword');

        const errorMessage = await loginPage.getErrorMessage();
        expect(errorMessage).toContain('Invalid credentials');
    });

    test('login button disabled with empty fields', async () => {
        const isEnabled = await loginPage.isLoginButtonEnabled();
        expect(isEnabled).toBe(false);
    });
});
```

### 5.3 æ•°æ®é©±åŠ¨æµ‹è¯•

#### å‚æ•°åŒ–æµ‹è¯•å®ç°
```python
# pytestå‚æ•°åŒ–æµ‹è¯•
import pytest

class TestUserValidation:

    @pytest.mark.parametrize("email,password,expected_result,test_description", [
        ("valid@example.com", "ValidPass123!", True, "æœ‰æ•ˆé‚®ç®±å’Œå¯†ç "),
        ("invalid-email", "ValidPass123!", False, "æ— æ•ˆé‚®ç®±æ ¼å¼"),
        ("valid@example.com", "weak", False, "å¼±å¯†ç "),
        ("", "ValidPass123!", False, "ç©ºé‚®ç®±"),
        ("valid@example.com", "", False, "ç©ºå¯†ç "),
        ("test@test.com", "Test123!", True, "è¾¹ç•Œæœ‰æ•ˆæ•°æ®"),
        ("a" * 100 + "@example.com", "ValidPass123!", False, "è¶…é•¿é‚®ç®±"),
        ("valid@example.com", "a" * 200, False, "è¶…é•¿å¯†ç ")
    ])
    def test_user_registration_validation(self, email, password, expected_result, test_description):
        """å‚æ•°åŒ–æµ‹è¯•ç”¨æˆ·æ³¨å†ŒéªŒè¯"""
        result = validate_user_registration(email, password)
        assert result == expected_result, f"æµ‹è¯•å¤±è´¥: {test_description}"

    @pytest.mark.parametrize("age,expected_category", [
        (5, "child"),
        (17, "teenager"),
        (18, "adult"),
        (65, "adult"),
        (66, "senior"),
        (0, "infant"),
        (-1, "invalid"),
        (150, "invalid")
    ])
    def test_age_categorization(self, age, expected_category):
        """å¹´é¾„åˆ†ç±»æµ‹è¯•"""
        result = categorize_by_age(age)
        assert result == expected_category
```

#### CSVæ•°æ®é©±åŠ¨æµ‹è¯•
```javascript
// Jest + CSVæ•°æ®é©±åŠ¨æµ‹è¯•
const fs = require('fs');
const csv = require('csv-parser');

describe('Data-driven Login Tests', () => {
    let testData = [];

    beforeAll((done) => {
        fs.createReadStream('test-data/login-test-data.csv')
            .pipe(csv())
            .on('data', (row) => {
                testData.push(row);
            })
            .on('end', () => {
                done();
            });
    });

    test.each(testData)('Login test: $description', async (data) => {
        const { email, password, expectedResult, description } = data;

        const result = await loginUser(email, password);

        if (expectedResult === 'success') {
            expect(result.success).toBe(true);
            expect(result.token).toBeDefined();
        } else {
            expect(result.success).toBe(false);
            expect(result.error).toBeDefined();
        }
    });
});
```

## å…­ã€æ€§èƒ½æµ‹è¯•ç”¨ä¾‹

### 6.1 è´Ÿè½½æµ‹è¯•ç”¨ä¾‹

#### JMeteræµ‹è¯•è®¡åˆ’
```xml
<!-- JMeteræµ‹è¯•è®¡åˆ’ç¤ºä¾‹ -->
<?xml version="1.0" encoding="UTF-8"?>
<jmeterTestPlan version="1.2">
  <hashTree>
    <TestPlan testname="API Load Test" enabled="true">
      <elementProp name="TestPlan.arguments" elementType="Arguments" guiclass="ArgumentsPanel">
        <collectionProp name="Arguments.arguments">
          <elementProp name="baseUrl" elementType="Argument">
            <stringProp name="Argument.name">baseUrl</stringProp>
            <stringProp name="Argument.value">https://api.example.com</stringProp>
          </elementProp>
        </collectionProp>
      </elementProp>
    </TestPlan>

    <hashTree>
      <ThreadGroup testname="User Load" enabled="true">
        <stringProp name="ThreadGroup.num_threads">100</stringProp>
        <stringProp name="ThreadGroup.ramp_time">60</stringProp>
        <stringProp name="ThreadGroup.duration">300</stringProp>
        <boolProp name="ThreadGroup.scheduler">true</boolProp>
      </ThreadGroup>

      <hashTree>
        <HTTPSamplerProxy testname="Login API" enabled="true">
          <stringProp name="HTTPSampler.domain">${baseUrl}</stringProp>
          <stringProp name="HTTPSampler.path">/api/auth/login</stringProp>
          <stringProp name="HTTPSampler.method">POST</stringProp>
          <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
        </HTTPSamplerProxy>

        <ResponseAssertion testname="Response Code Assertion" enabled="true">
          <collectionProp name="Asserion.test_strings">
            <stringProp>200</stringProp>
          </collectionProp>
          <stringProp name="Assertion.test_field">Assertion.response_code</stringProp>
        </ResponseAssertion>

        <ResponseAssertion testname="Response Time Assertion" enabled="true">
          <stringProp name="Assertion.test_field">Assertion.response_time</stringProp>
          <stringProp name="Assertion.duration">2000</stringProp>
        </ResponseAssertion>
      </hashTree>
    </hashTree>
  </hashTree>
</jmeterTestPlan>
```

#### K6æ€§èƒ½æµ‹è¯•è„šæœ¬
```javascript
// K6è´Ÿè½½æµ‹è¯•è„šæœ¬
import http from 'k6/http';
import { check, sleep } from 'k6';
import { Rate } from 'k6/metrics';

// è‡ªå®šä¹‰æŒ‡æ ‡
const errorRate = new Rate('errors');

// æµ‹è¯•é…ç½®
export let options = {
    stages: [
        { duration: '2m', target: 10 },   // é¢„çƒ­é˜¶æ®µ
        { duration: '5m', target: 50 },   // æ­£å¸¸è´Ÿè½½
        { duration: '2m', target: 100 },  // å³°å€¼è´Ÿè½½
        { duration: '5m', target: 100 },  // æŒç»­å³°å€¼
        { duration: '2m', target: 0 },    // é™è´Ÿè½½
    ],
    thresholds: {
        http_req_duration: ['p(95)<2000'], // 95%çš„è¯·æ±‚å“åº”æ—¶é—´å°äº2ç§’
        http_req_failed: ['rate<0.1'],     // é”™è¯¯ç‡å°äº10%
        errors: ['rate<0.1'],              // è‡ªå®šä¹‰é”™è¯¯ç‡å°äº10%
    },
};

// æµ‹è¯•æ•°æ®
const users = [
    { email: 'user1@example.com', password: 'password123' },
    { email: 'user2@example.com', password: 'password123' },
    { email: 'user3@example.com', password: 'password123' },
];

export default function() {
    // éšæœºé€‰æ‹©ç”¨æˆ·
    const user = users[Math.floor(Math.random() * users.length)];

    // 1. ç™»å½•è¯·æ±‚
    const loginResponse = http.post('https://api.example.com/auth/login', {
        email: user.email,
        password: user.password
    }, {
        headers: { 'Content-Type': 'application/json' }
    });

    // éªŒè¯ç™»å½•å“åº”
    const loginSuccess = check(loginResponse, {
        'login status is 200': (r) => r.status === 200,
        'login response time < 1000ms': (r) => r.timings.duration < 1000,
        'login returns token': (r) => r.json('token') !== undefined,
    });

    errorRate.add(!loginSuccess);

    if (loginSuccess) {
        const token = loginResponse.json('token');

        // 2. è·å–ç”¨æˆ·ä¿¡æ¯
        const profileResponse = http.get('https://api.example.com/user/profile', {
            headers: {
                'Authorization': `Bearer ${token}`,
                'Content-Type': 'application/json'
            }
        });

        check(profileResponse, {
            'profile status is 200': (r) => r.status === 200,
            'profile response time < 500ms': (r) => r.timings.duration < 500,
        });

        // 3. è·å–æ•°æ®åˆ—è¡¨
        const dataResponse = http.get('https://api.example.com/data?page=1&limit=20', {
            headers: {
                'Authorization': `Bearer ${token}`,
                'Content-Type': 'application/json'
            }
        });

        check(dataResponse, {
            'data status is 200': (r) => r.status === 200,
            'data response time < 1500ms': (r) => r.timings.duration < 1500,
            'data contains items': (r) => r.json('items').length > 0,
        });
    }

    // æ¨¡æ‹Ÿç”¨æˆ·æ€è€ƒæ—¶é—´
    sleep(Math.random() * 3 + 1); // 1-4ç§’éšæœºç­‰å¾…
}

// æµ‹è¯•ç»“æŸåçš„æ¸…ç†å‡½æ•°
export function teardown(data) {
    console.log('Performance test completed');
}
```

## ä¸ƒã€æµ‹è¯•ç”¨ä¾‹æœ€ä½³å®è·µ

### 7.1 æµ‹è¯•ç”¨ä¾‹è®¾è®¡åŸåˆ™

#### FIRSTåŸåˆ™
```javascript
// FIRSTåŸåˆ™ç¤ºä¾‹
const testPrinciples = {
    Fast: {
        description: "æµ‹è¯•åº”è¯¥å¿«é€Ÿæ‰§è¡Œ",
        example: `
        // âœ… å¥½çš„å®è·µï¼šä½¿ç”¨Mocké¿å…ç½‘ç»œè°ƒç”¨
        test('calculate total price', () => {
            const mockProducts = [
                { price: 10.99, quantity: 2 },
                { price: 5.99, quantity: 1 }
            ];
            const total = calculateTotal(mockProducts);
            expect(total).toBe(27.97);
        });

        // âŒ é¿å…ï¼šå®é™…çš„ç½‘ç»œè¯·æ±‚
        test('fetch products from API', async () => {
            const products = await fetchProductsFromAPI(); // æ…¢
            expect(products.length).toBeGreaterThan(0);
        });`
    },

    Independent: {
        description: "æµ‹è¯•ä¹‹é—´åº”è¯¥ç›¸äº’ç‹¬ç«‹",
        example: `
        // âœ… å¥½çš„å®è·µï¼šæ¯ä¸ªæµ‹è¯•ç‹¬ç«‹è®¾ç½®æ•°æ®
        describe('User Service', () => {
            beforeEach(() => {
                // æ¯ä¸ªæµ‹è¯•å‰é‡ç½®çŠ¶æ€
                userService.reset();
            });

            test('create user', () => {
                const user = userService.create({ name: 'John' });
                expect(user.id).toBeDefined();
            });

            test('delete user', () => {
                const user = userService.create({ name: 'Jane' });
                const result = userService.delete(user.id);
                expect(result).toBe(true);
            });
        });`
    },

    Repeatable: {
        description: "æµ‹è¯•ç»“æœåº”è¯¥å¯é‡å¤",
        example: `
        // âœ… å¥½çš„å®è·µï¼šä½¿ç”¨å›ºå®šçš„æµ‹è¯•æ•°æ®
        test('format date', () => {
            const fixedDate = new Date('2025-07-18T10:00:00Z');
            const formatted = formatDate(fixedDate);
            expect(formatted).toBe('2025-07-18');
        });

        // âŒ é¿å…ï¼šä¾èµ–å½“å‰æ—¶é—´
        test('is recent date', () => {
            const now = new Date(); // ä¸å¯é¢„æµ‹
            const result = isRecent(now);
            expect(result).toBe(true);
        });`
    },

    SelfValidating: {
        description: "æµ‹è¯•åº”è¯¥æœ‰æ˜ç¡®çš„é€šè¿‡/å¤±è´¥ç»“æœ",
        example: `
        // âœ… å¥½çš„å®è·µï¼šæ˜ç¡®çš„æ–­è¨€
        test('user validation', () => {
            const result = validateUser({ email: 'test@example.com' });
            expect(result.isValid).toBe(true);
            expect(result.errors).toHaveLength(0);
        });

        // âŒ é¿å…ï¼šéœ€è¦äººå·¥åˆ¤æ–­çš„è¾“å‡º
        test('print user info', () => {
            const user = getUser(1);
            console.log(user); // éœ€è¦äººå·¥æ£€æŸ¥
        });`
    },

    Timely: {
        description: "æµ‹è¯•åº”è¯¥åŠæ—¶ç¼–å†™",
        example: `
        // âœ… å¥½çš„å®è·µï¼šTDD - å…ˆå†™æµ‹è¯•
        test('calculate discount', () => {
            // å…ˆå†™æµ‹è¯•ï¼Œå®šä¹‰æœŸæœ›è¡Œä¸º
            const discount = calculateDiscount(100, 'VIP');
            expect(discount).toBe(20);
        });

        // ç„¶åå®ç°åŠŸèƒ½
        function calculateDiscount(amount, customerType) {
            if (customerType === 'VIP') {
                return amount * 0.2;
            }
            return 0;
        }`
    }
};
```

### 7.2 æµ‹è¯•ç”¨ä¾‹ç»´æŠ¤ç­–ç•¥

#### æµ‹è¯•ç”¨ä¾‹ç”Ÿå‘½å‘¨æœŸç®¡ç†
```javascript
// æµ‹è¯•ç”¨ä¾‹ç»´æŠ¤ç­–ç•¥
const testMaintenanceStrategy = {
    // 1. å®šæœŸå®¡æŸ¥
    regularReview: {
        frequency: "æ¯æœˆä¸€æ¬¡",
        activities: [
            "æ£€æŸ¥å¤±æ•ˆçš„æµ‹è¯•ç”¨ä¾‹",
            "æ›´æ–°è¿‡æ—¶çš„æµ‹è¯•æ•°æ®",
            "ä¼˜åŒ–æ‰§è¡Œç¼“æ…¢çš„æµ‹è¯•",
            "åˆ é™¤é‡å¤çš„æµ‹è¯•ç”¨ä¾‹"
        ]
    },

    // 2. ç‰ˆæœ¬æ§åˆ¶
    versionControl: {
        strategy: "ä¸ä»£ç åŒæ­¥ç‰ˆæœ¬æ§åˆ¶",
        practices: [
            "æµ‹è¯•ç”¨ä¾‹ä¸åŠŸèƒ½ä»£ç ä¸€èµ·æäº¤",
            "ä½¿ç”¨åˆ†æ”¯ç®¡ç†æµ‹è¯•ç”¨ä¾‹å˜æ›´",
            "ä»£ç å®¡æŸ¥åŒ…å«æµ‹è¯•ç”¨ä¾‹å®¡æŸ¥",
            "ç»´æŠ¤æµ‹è¯•ç”¨ä¾‹å˜æ›´æ—¥å¿—"
        ]
    },

    // 3. é‡æ„ç­–ç•¥
    refactoringStrategy: {
        triggers: [
            "æµ‹è¯•æ‰§è¡Œæ—¶é—´è¿‡é•¿",
            "æµ‹è¯•ç”¨ä¾‹é‡å¤åº¦é«˜",
            "ç»´æŠ¤æˆæœ¬è¿‡é«˜",
            "ä¸šåŠ¡é€»è¾‘å˜æ›´"
        ],
        methods: [
            "æå–å…¬å…±æµ‹è¯•æ–¹æ³•",
            "ä½¿ç”¨æµ‹è¯•å·¥å‚æ¨¡å¼",
            "å®ç°é¡µé¢å¯¹è±¡æ¨¡å¼",
            "ä¼˜åŒ–æµ‹è¯•æ•°æ®ç®¡ç†"
        ]
    }
};

// æµ‹è¯•ç”¨ä¾‹é‡æ„ç¤ºä¾‹
class TestRefactoringExample {
    // é‡æ„å‰ï¼šé‡å¤çš„æµ‹è¯•ä»£ç 
    testUserCreationBefore() {
        // é‡å¤çš„è®¾ç½®ä»£ç 
        const userData = {
            email: 'test@example.com',
            password: 'password123',
            firstName: 'John',
            lastName: 'Doe'
        };

        const user = createUser(userData);
        expect(user.id).toBeDefined();
        expect(user.email).toBe(userData.email);
    }

    // é‡æ„åï¼šæå–å…¬å…±æ–¹æ³•
    createTestUser(overrides = {}) {
        const defaultUserData = {
            email: 'test@example.com',
            password: 'password123',
            firstName: 'John',
            lastName: 'Doe'
        };

        return { ...defaultUserData, ...overrides };
    }

    testUserCreationAfter() {
        const userData = this.createTestUser();
        const user = createUser(userData);

        expect(user.id).toBeDefined();
        expect(user.email).toBe(userData.email);
    }

    testUserCreationWithCustomEmail() {
        const userData = this.createTestUser({
            email: 'custom@example.com'
        });
        const user = createUser(userData);

        expect(user.email).toBe('custom@example.com');
    }
}
```

### 7.3 æµ‹è¯•æŠ¥å‘Šä¸åº¦é‡

#### æµ‹è¯•è¦†ç›–ç‡åˆ†æ
```javascript
// Jestè¦†ç›–ç‡é…ç½®
module.exports = {
    collectCoverage: true,
    coverageDirectory: 'coverage',
    coverageReporters: ['text', 'lcov', 'html'],
    coverageThreshold: {
        global: {
            branches: 80,
            functions: 80,
            lines: 80,
            statements: 80
        },
        './src/utils/': {
            branches: 90,
            functions: 90,
            lines: 90,
            statements: 90
        }
    },
    collectCoverageFrom: [
        'src/**/*.{js,jsx}',
        '!src/index.js',
        '!src/serviceWorker.js',
        '!src/**/*.test.js'
    ]
};

// è‡ªå®šä¹‰æµ‹è¯•æŠ¥å‘Šç”Ÿæˆ
class TestReportGenerator {
    generateReport(testResults) {
        const report = {
            summary: {
                totalTests: testResults.length,
                passed: testResults.filter(t => t.status === 'passed').length,
                failed: testResults.filter(t => t.status === 'failed').length,
                skipped: testResults.filter(t => t.status === 'skipped').length,
                executionTime: testResults.reduce((sum, t) => sum + t.duration, 0)
            },

            coverage: {
                statements: this.calculateCoverage('statements'),
                branches: this.calculateCoverage('branches'),
                functions: this.calculateCoverage('functions'),
                lines: this.calculateCoverage('lines')
            },

            failedTests: testResults
                .filter(t => t.status === 'failed')
                .map(t => ({
                    name: t.name,
                    error: t.error,
                    file: t.file,
                    line: t.line
                })),

            performance: {
                slowestTests: testResults
                    .sort((a, b) => b.duration - a.duration)
                    .slice(0, 10),
                averageExecutionTime: testResults.reduce((sum, t) => sum + t.duration, 0) / testResults.length
            }
        };

        return report;
    }

    generateHTMLReport(report) {
        return `
        <!DOCTYPE html>
        <html>
        <head>
            <title>æµ‹è¯•æŠ¥å‘Š</title>
            <style>
                body { font-family: Arial, sans-serif; margin: 20px; }
                .summary { background: #f5f5f5; padding: 15px; border-radius: 5px; }
                .passed { color: green; }
                .failed { color: red; }
                .coverage { margin: 20px 0; }
                .coverage-bar { width: 200px; height: 20px; background: #ddd; border-radius: 10px; }
                .coverage-fill { height: 100%; background: #4caf50; border-radius: 10px; }
            </style>
        </head>
        <body>
            <h1>æµ‹è¯•æ‰§è¡ŒæŠ¥å‘Š</h1>

            <div class="summary">
                <h2>æµ‹è¯•æ¦‚è¦</h2>
                <p>æ€»æµ‹è¯•æ•°: ${report.summary.totalTests}</p>
                <p class="passed">é€šè¿‡: ${report.summary.passed}</p>
                <p class="failed">å¤±è´¥: ${report.summary.failed}</p>
                <p>è·³è¿‡: ${report.summary.skipped}</p>
                <p>æ‰§è¡Œæ—¶é—´: ${report.summary.executionTime}ms</p>
            </div>

            <div class="coverage">
                <h2>ä»£ç è¦†ç›–ç‡</h2>
                <div>
                    <span>è¯­å¥è¦†ç›–ç‡: ${report.coverage.statements}%</span>
                    <div class="coverage-bar">
                        <div class="coverage-fill" style="width: ${report.coverage.statements}%"></div>
                    </div>
                </div>
                <!-- å…¶ä»–è¦†ç›–ç‡æŒ‡æ ‡... -->
            </div>

            ${report.failedTests.length > 0 ? `
            <div class="failed-tests">
                <h2>å¤±è´¥çš„æµ‹è¯•</h2>
                <ul>
                    ${report.failedTests.map(test => `
                        <li>
                            <strong>${test.name}</strong><br>
                            <span style="color: red;">${test.error}</span><br>
                            <small>${test.file}:${test.line}</small>
                        </li>
                    `).join('')}
                </ul>
            </div>
            ` : ''}
        </body>
        </html>
        `;
    }
}
```

## å…«ã€æ€»ç»“ä¸å±•æœ›

### 8.1 æµ‹è¯•ç”¨ä¾‹è®¾è®¡æ ¸å¿ƒè¦ç‚¹

1. **ç³»ç»Ÿæ€§è®¾è®¡**ï¼šä½¿ç”¨ç§‘å­¦çš„æµ‹è¯•è®¾è®¡æ–¹æ³•ï¼Œç¡®ä¿æµ‹è¯•è¦†ç›–å…¨é¢
2. **è´¨é‡ä¼˜å…ˆ**ï¼šç¼–å†™é«˜è´¨é‡ã€å¯ç»´æŠ¤çš„æµ‹è¯•ç”¨ä¾‹
3. **è‡ªåŠ¨åŒ–é©±åŠ¨**ï¼šä¼˜å…ˆè€ƒè™‘è‡ªåŠ¨åŒ–æ‰§è¡Œå’ŒæŒç»­é›†æˆ
4. **æ•°æ®é©±åŠ¨**ï¼šåˆç†ç®¡ç†æµ‹è¯•æ•°æ®ï¼Œæé«˜æµ‹è¯•æ•ˆç‡
5. **æŒç»­æ”¹è¿›**ï¼šå®šæœŸå®¡æŸ¥å’Œä¼˜åŒ–æµ‹è¯•ç”¨ä¾‹

### 8.2 æœªæ¥å‘å±•è¶‹åŠ¿

- **AIè¾…åŠ©æµ‹è¯•**ï¼šåˆ©ç”¨äººå·¥æ™ºèƒ½ç”Ÿæˆå’Œä¼˜åŒ–æµ‹è¯•ç”¨ä¾‹
- **æ™ºèƒ½åŒ–æµ‹è¯•**ï¼šè‡ªåŠ¨è¯†åˆ«æµ‹è¯•åœºæ™¯å’Œç”Ÿæˆæµ‹è¯•æ•°æ®
- **äº‘ç«¯æµ‹è¯•**ï¼šåŸºäºäº‘å¹³å°çš„å¤§è§„æ¨¡å¹¶è¡Œæµ‹è¯•æ‰§è¡Œ
- **å¯è§†åŒ–æµ‹è¯•**ï¼šå›¾å½¢åŒ–çš„æµ‹è¯•ç”¨ä¾‹è®¾è®¡å’Œç®¡ç†å·¥å…·

æµ‹è¯•ç”¨ä¾‹æ˜¯è½¯ä»¶è´¨é‡ä¿è¯çš„åŸºçŸ³ï¼ŒæŒæ¡æµ‹è¯•ç”¨ä¾‹çš„è®¾è®¡å’Œç¼–å†™æŠ€èƒ½å¯¹äºä»»ä½•è½¯ä»¶å¼€å‘å›¢é˜Ÿéƒ½è‡³å…³é‡è¦ã€‚é€šè¿‡ç³»ç»Ÿçš„å­¦ä¹ å’Œå®è·µï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ„å»ºæ›´åŠ å¯é ã€é«˜æ•ˆçš„æµ‹è¯•ä½“ç³»ï¼Œç¡®ä¿è½¯ä»¶äº§å“çš„è´¨é‡å’Œç”¨æˆ·ä½“éªŒã€‚

å¸Œæœ›è¿™ä»½æµ‹è¯•ç”¨ä¾‹æŒ‡å—èƒ½å¤Ÿå¸®åŠ©ä½ åœ¨è½¯ä»¶æµ‹è¯•çš„é“è·¯ä¸Šæ›´è¿›ä¸€æ­¥ï¼ğŸ§ªâœ¨
